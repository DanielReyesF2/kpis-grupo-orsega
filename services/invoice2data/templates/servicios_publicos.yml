# =============================================================================
# TEMPLATE SERVICIOS PÚBLICOS (CFE, TELMEX, GAS, AGUA, ETC.)
# =============================================================================
# Para recibos de servicios públicos mexicanos

issuer: Servicios Públicos México

keywords:
  # Electricidad
  - cfe
  - comisión federal de electricidad
  - comision federal de electricidad
  - kwh
  - kilowatt
  - tarifa dac
  - tarifa doméstica
  - consumo de energía
  - suministro eléctrico
  - medidor
  - lectura anterior
  - lectura actual
  - demanda

  # Telefonía e Internet
  - telmex
  - izzi
  - totalplay
  - megacable
  - at&t
  - telcel
  - movistar
  - axtel
  - línea telefónica
  - internet
  - fibra óptica
  - paquete
  - mb
  - mbps

  # Gas
  - naturgy
  - gas natural
  - gas natural fenosa
  - m3
  - metros cúbicos

  # Agua
  - agua potable
  - sapasma
  - caem
  - conagua
  - sacmex
  - siapa
  - agua y saneamiento
  - consumo de agua
  - litros

  # Predial e impuestos locales
  - predial
  - impuesto predial
  - catastro
  - valor catastral
  - tenencia
  - impuesto vehicular

  # Términos comunes
  - número de servicio
  - numero de servicio
  - número de cuenta
  - numero de cuenta
  - número de contrato
  - periodo de consumo
  - periodo facturado
  - cargo fijo
  - cargo variable
  - subsidio
  - recibo
  - fecha límite de pago
  - fecha limite de pago
  - fecha de vencimiento
  - vencimiento
  - corte
  - reconexión
  - adeudo
  - saldo anterior
  - pago mínimo

exclude_keywords:
  - invoice
  - bill to
  - ship to
  - usd
  - cfdi
  - folio fiscal

fields:
  # Empresa de servicios
  issuer:
    parser: regex
    regex: (Comisi[oó]n\s*Federal\s*de\s*Electricidad|CFE|TELMEX|Izzi|Totalplay|Megacable|TELCEL|Naturgy|Gas\s*Natural|SACMEX|SIAPA|CAEM)
    group: 1

  # Número de cuenta/servicio
  invoice_number:
    parser: regex
    regex: (?:N[uú]mero\s*de\s*[Ss]ervicio|N[uú]mero\s*de\s*[Cc]uenta|Cuenta|No\.?\s*(?:de\s*)?[Cc]uenta|Contrato)[\s:]+([A-Z0-9\-]{6,20})
    group: 1

  # Total a pagar
  amount:
    parser: regex
    regex: (?:Total\s*a\s*[Pp]agar|Importe\s*Total|Total|Monto\s*a\s*[Pp]agar|Pago\s*M[ií]nimo)[\s:$]*\$?\s*([\d,]+\.?\d*)
    group: 1
    type: float

  # Fecha límite de pago
  due_date:
    parser: regex
    regex: (?:Fecha\s*[Ll][ií]mite|Vence|Pague?\s*antes\s*del?|Fecha\s*(?:de\s*)?[Vv]encimiento|Corte)[\s:]+(\d{1,2}[\/\-\.]\d{1,2}[\/\-\.]\d{2,4})
    group: 1

  # Periodo de facturación / Fecha de emisión
  date:
    parser: regex
    regex: (?:Periodo|Fecha\s*(?:de\s*)?[Ee]misi[oó]n|Periodo\s*(?:de\s*)?[Cc]onsumo|Periodo\s*[Ff]acturado)[\s:]+(\d{1,2}[\/\-\.]\d{1,2}[\/\-\.]\d{2,4})
    group: 1

  # Consumo (kWh, m3, litros, etc.)
  consumption:
    parser: regex
    regex: (?:Consumo|kWh|m3|[Ll]itros)[\s:]+(\d+\.?\d*)
    group: 1
    type: float

  # Saldo anterior
  previous_balance:
    parser: regex
    regex: (?:Saldo\s*[Aa]nterior|Adeudo\s*[Aa]nterior)[\s:$]*\$?\s*([\d,]+\.?\d*)
    group: 1
    type: float

options:
  currency: MXN
  date_formats:
    - "%d/%m/%Y"
    - "%d-%m-%Y"
    - "%d de %B de %Y"
    - "%d/%b/%Y"
  decimal_separator: "."
  remove_whitespace: true
