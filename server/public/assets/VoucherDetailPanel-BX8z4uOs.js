import{R as P,r as o,j as e,P as M,C as j,c,a as T,X as E,b as O,T as N,D as k,O as y,d as z,F as I,e as V,f as _,g as C,B as h,h as U,S as X,i as $,I as i,U as G,k as H,l as L,m as b,n as q,o as f,p as J}from"./index-DM4uC4uJ.js";const K=P,Q=M,v=o.forwardRef(({className:a,...l},d)=>e.jsx(y,{className:c("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:d}));v.displayName=y.displayName;const W=O("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),w=o.forwardRef(({side:a="right",className:l,children:d,...m},r)=>e.jsxs(Q,{children:[e.jsx(v,{}),e.jsxs(j,{ref:r,className:c(W({side:a}),l),...m,children:[d,e.jsxs(T,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));w.displayName=j.displayName;const S=({className:a,...l})=>e.jsx("div",{className:c("flex flex-col space-y-2 text-center sm:text-left",a),...l});S.displayName="SheetHeader";const D=o.forwardRef(({className:a,...l},d)=>e.jsx(N,{ref:d,className:c("text-lg font-semibold text-foreground",a),...l}));D.displayName=N.displayName;const R=o.forwardRef(({className:a,...l},d)=>e.jsx(k,{ref:d,className:c("text-sm text-muted-foreground",a),...l}));R.displayName=k.displayName;const Y={pago_programado:{label:"Pago Programado",icon:C,color:"bg-gray-100 dark:bg-gray-900/30 text-gray-700 dark:text-gray-300"},factura_pagada:{label:"Factura Pagada",icon:_,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},pendiente_complemento:{label:"Pendiente Complemento",icon:V,color:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300"},complemento_recibido:{label:"Complemento Recibido",icon:I,color:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300"},cierre_contable:{label:"Cierre Contable",icon:z,color:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300"}};function ee({voucher:a,isOpen:l,onClose:d,onSave:m}){var u;const[r,x]=o.useState(!1),[g,n]=o.useState(null);if(!a)return null;const A=()=>{n({...a}),x(!0)},F=()=>{g&&m&&m(g),x(!1),n(null)},B=()=>{x(!1),n(null)},t=g||a,p=Y[a.status];return e.jsx(K,{open:l,onOpenChange:d,children:e.jsxs(w,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-2xl",children:"Detalles del Comprobante"}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"outline",size:"sm",onClick:B,children:"Cancelar"}),e.jsxs(h,{size:"sm",onClick:F,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Guardar"]})]}):e.jsxs(h,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Editar"]})})]}),e.jsx(R,{children:"InformaciÃ³n completa del comprobante de pago"})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p.icon,{className:"h-5 w-5"}),e.jsx($,{className:p.color,children:p.label})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Cliente"}),r?e.jsx(i,{value:t.clientName||"",onChange:s=>n({...t,clientName:s.target.value})}):e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-slate-50 dark:bg-slate-900",children:[e.jsx(G,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"font-medium",children:a.clientName})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Monto"}),r?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"text",value:t.extractedCurrency||"",onChange:s=>n({...t,extractedCurrency:s.target.value}),placeholder:"MXN",className:"w-20"}),e.jsx(i,{type:"number",value:t.extractedAmount||"",onChange:s=>n({...t,extractedAmount:parseFloat(s.target.value)||null}),placeholder:"0.00"})]}):e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-slate-50 dark:bg-slate-900",children:[e.jsx(H,{className:"h-4 w-4 text-slate-500"}),e.jsxs("span",{className:"font-medium",children:[a.extractedCurrency||"MXN"," $",((u=a.extractedAmount)==null?void 0:u.toLocaleString())||"0.00"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Banco"}),r?e.jsx(i,{value:t.extractedBank||"",onChange:s=>n({...t,extractedBank:s.target.value})}):e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-slate-50 dark:bg-slate-900",children:[e.jsx(L,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:a.extractedBank||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Fecha"}),r?e.jsx(i,{type:"date",value:t.extractedDate?b(new Date(t.extractedDate),"yyyy-MM-dd"):"",onChange:s=>n({...t,extractedDate:s.target.value?new Date(s.target.value).toISOString():null})}):e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-slate-50 dark:bg-slate-900",children:[e.jsx(C,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:a.extractedDate?b(new Date(a.extractedDate),"dd MMM yyyy",{locale:q}):"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Referencia"}),r?e.jsx(i,{value:t.extractedReference||"",onChange:s=>n({...t,extractedReference:s.target.value})}):e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-slate-50 dark:bg-slate-900",children:[e.jsx(f,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:a.extractedReference||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Archivo"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-slate-50 dark:bg-slate-900",children:[e.jsx(f,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm truncate",children:a.voucherFileName})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Notas"}),r?e.jsx(J,{value:t.notes||"",onChange:s=>n({...t,notes:s.target.value}),rows:4,placeholder:"Agregar notas..."}):e.jsx("div",{className:"p-3 rounded-md bg-slate-50 dark:bg-slate-900 min-h-[100px]",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:a.notes||"Sin notas"})})]}),a.ocrConfidence!==null&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Confianza OCR"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${a.ocrConfidence>.7?"bg-green-500":a.ocrConfidence>.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a.ocrConfidence*100}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[(a.ocrConfidence*100).toFixed(0),"%"]})]})]})]})]})})}export{ee as VoucherDetailPanel};
